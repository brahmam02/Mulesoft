<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:salesforce="http://www.mulesoft.org/schema/mule/salesforce" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd http://www.mulesoft.org/schema/mule/salesforce http://www.mulesoft.org/schema/mule/salesforce/current/mule-salesforce.xsd">

    <!-- Configuration Properties -->
    <configuration-properties file="config.properties" doc:name="Configuration properties"/>
    
    <!-- HTTP Listener Configuration -->
    <http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="http-listener-config">
        <http:listener-connection host="${api.host}" port="${api.port}"/>
    </http:listener-config>
    
    <!-- File Configuration -->
    <file:config name="File_Config" doc:name="File Config" doc:id="file-config">
        <file:connection workingDir="${file.input.directory}"/>
    </file:config>
    
    <!-- Salesforce Configuration -->
    <salesforce:sfdc-config name="Salesforce_Config" doc:name="Salesforce Config" doc:id="salesforce-config">
        <salesforce:basic-connection 
            username="${salesforce.username}" 
            password="${salesforce.password}" 
            securityToken="${salesforce.securityToken}"
            url="${salesforce.url}"
            readTimeout="${salesforce.timeout}"/>
    </salesforce:sfdc-config>

    <!-- Global Error Handler -->
    <error-handler name="globalErrorHandler" doc:id="global-error-handler">
        <on-error-continue doc:name="On Error Continue" doc:id="global-error-continue" type="ANY">
            <logger level="ERROR" doc:name="Global Error Logger" doc:id="global-error-logger" 
                    message="Global error occurred: #[error.description] - Error Type: #[error.errorType]"/>
        </on-error-continue>
    </error-handler>

</mule>
